<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GESYA - Sertifikat</title>

  <!-- Pakai CSS utama kamu -->
  <link rel="stylesheet" href="./css/menu.css?v=3">

  <style>
    :root{
      --dark:#0f172a;
      --soft:#f8fafc;
      --line:#e2e8f0;
      --gold:#ffb703;
    }

    /* ===== Background meriah ===== */
    body.home{
      position:relative;
      overflow-x:hidden;
    }

    /* confetti layer */
    .confetti{
      pointer-events:none;
      position:fixed;
      inset:0;
      z-index:1;
      overflow:hidden;
    }
    .confetti i{
      position:absolute;
      top:-10vh;
      width:10px;
      height:16px;
      border-radius:3px;
      opacity:.95;
      animation: confettiFall linear infinite;
      transform: rotate(12deg);
      filter: drop-shadow(0 8px 10px rgba(0,0,0,.15));
    }
    @keyframes confettiFall{
      0%{ transform:translateY(-15vh) rotate(0deg); }
      100%{ transform:translateY(115vh) rotate(360deg); }
    }

    /* sparkle bintang */
    .sparkle{
      pointer-events:none;
      position:fixed;
      inset:0;
      z-index:2;
      overflow:hidden;
    }
    .sparkle span{
      position:absolute;
      font-size:14px;
      opacity:.0;
      animation: sparklePop 2.2s ease-in-out infinite;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
    }
    @keyframes sparklePop{
      0%{ transform:translateY(0) scale(.6); opacity:0; }
      25%{ opacity:1; }
      50%{ transform:translateY(-16px) scale(1.05); opacity:.95; }
      100%{ transform:translateY(-28px) scale(.75); opacity:0; }
    }

    /* ===== Hero atas (gambar diperkecil) ===== */
    .hero{
      position:relative;
      z-index:3;
    }
    .hero .mascot{
      width:140px;       /* diperkecil */
      height:auto;
      border-radius:18px;
      box-shadow:0 16px 32px rgba(0,0,0,.12);
      border:6px solid rgba(255,183,3,.25);
      animation: floaty 4.5s ease-in-out infinite;
    }
    @keyframes floaty{
      0%,100%{ transform:translateY(0); }
      50%{ transform:translateY(-10px); }
    }

    /* ===== Sertifikat card ===== */
    .cert-wrap{
      max-width:820px;
      margin:12px auto 44px;
      padding:16px;
      position:relative;
      z-index:4; /* di atas confetti */
    }

    .cert{
      background:#fff;
      border-radius:26px;
      padding:26px;
      box-shadow:0 22px 55px rgba(0,0,0,.12);
      position:relative;
      overflow:hidden;
      transform: translateY(10px);
      opacity:0;
      animation: cardEnter .75s ease-out forwards;
    }
    @keyframes cardEnter{
      to{ transform: translateY(0); opacity:1; }
    }

    /* glow animasi border */
    .cert::before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius:28px;
      background: linear-gradient(90deg,
        rgba(255,183,3,.95),
        rgba(59,130,246,.75),
        rgba(16,185,129,.75),
        rgba(255,183,3,.95)
      );
      background-size: 300% 300%;
      animation: glowMove 4s ease infinite;
      z-index:0;
      opacity:.55;
      filter: blur(10px);
    }
    @keyframes glowMove{
      0%{ background-position: 0% 50%; }
      50%{ background-position: 100% 50%; }
      100%{ background-position: 0% 50%; }
    }

    /* inner */
    .cert::after{
      content:"";
      position:absolute;
      inset:6px;
      border-radius:22px;
      background:
        radial-gradient(circle at 18% 10%, rgba(255,183,3,.18), transparent 40%),
        radial-gradient(circle at 85% 90%, rgba(59,130,246,.14), transparent 42%),
        #ffffff;
      z-index:0;
    }

    .cert > *{ position:relative; z-index:1; }

    .cert-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .brand .t1{ font-weight:1000; letter-spacing:.3px; }
    .brand .t2{ font-size:12px; color:#64748b; font-weight:800; }

    .badge{
      font-weight:1000;
      padding:10px 14px;
      border-radius:999px;
      background:var(--dark);
      color:#fff;
      font-size:12px;
      letter-spacing:.6px;
      white-space:nowrap;
      animation: badgeWiggle 2.6s ease-in-out infinite;
      transform-origin:center;
      box-shadow:0 12px 26px rgba(15,23,42,.22);
    }
    @keyframes badgeWiggle{
      0%,100%{ transform:rotate(0deg) scale(1); }
      40%{ transform:rotate(-3deg) scale(1.02); }
      70%{ transform:rotate(3deg) scale(1.02); }
    }

    .titleRow{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      margin-top:8px;
    }

    .certTitle{
      margin:0;
      font-size:24px;
      line-height:1.1;
      font-weight:1000;
      color:#0f172a;
    }

    .lulusStamp{
      font-weight:1000;
      background:rgba(16,185,129,.12);
      color:#065f46;
      border:2px solid rgba(16,185,129,.25);
      padding:8px 12px;
      border-radius:14px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      animation: pulseOk 1.8s ease-in-out infinite;
      white-space:nowrap;
    }
    @keyframes pulseOk{
      0%,100%{ transform:scale(1); }
      50%{ transform:scale(1.03); }
    }

    /* ===== Info urutan sesuai kamu ===== */
    .info{
      margin-top:14px;
      display:grid;
      grid-template-columns: 160px 1fr;
      gap:10px 14px;
      padding:14px;
      border-radius:18px;
      background:rgba(241,245,249,.65);
      border:2px solid rgba(226,232,240,.8);
    }
    .info .k{
      font-weight:1000;
      color:#0f172a;
    }
    .info .v{
      font-weight:900;
      color:#0f172a;
      letter-spacing:.2px;
    }

    /* ===== Skor per level ===== */
    .scores{
      margin-top:14px;
      padding:14px;
      border-radius:18px;
      background:#fff;
      border:2px solid rgba(226,232,240,.9);
    }
    .scores h3{
      margin:0 0 10px;
      font-size:14px;
      font-weight:1000;
      color:#0f172a;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .scoreList{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:10px;
    }
    @media (max-width:640px){
      .scoreList{ grid-template-columns: 1fr; }
      .info{ grid-template-columns: 120px 1fr; }
    }
    .scoreItem{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 12px;
      border-radius:16px;
      background:rgba(248,250,252,.85);
      border:2px solid rgba(226,232,240,.85);
      animation: popIn .55s ease-out both;
    }
    .scoreItem:nth-child(1){ animation-delay:.06s; }
    .scoreItem:nth-child(2){ animation-delay:.12s; }
    .scoreItem:nth-child(3){ animation-delay:.18s; }
    .scoreItem:nth-child(4){ animation-delay:.24s; }
    .scoreItem:nth-child(5){ animation-delay:.30s; }
    .scoreItem:nth-child(6){ animation-delay:.36s; }

    @keyframes popIn{
      from{ transform: translateY(10px) scale(.98); opacity:0; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }

    .scoreItem b{
      font-weight:1000;
      color:#0f172a;
    }
    .scoreItem .n{
      font-weight:1000;
      color:#334155;
    }

    /* ===== Ringkasan bawah ===== */
    .stats{
      margin-top:14px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .chip{
      background:#f1f5f9;
      border:2px solid #e2e8f0;
      padding:10px 12px;
      border-radius:16px;
      font-weight:1000;
      color:#0f172a;
      display:flex;
      align-items:center;
      gap:8px;
      animation: chipFloat 3.4s ease-in-out infinite;
    }
    .chip:nth-child(2){ animation-delay:.4s; }
    .chip:nth-child(3){ animation-delay:.8s; }
    @keyframes chipFloat{
      0%,100%{ transform:translateY(0); }
      50%{ transform:translateY(-6px); }
    }

    /* ===== Button ===== */
    .actions{
      display:flex;
      gap:10px;
      margin-top:16px;
    }
    .btn{
      flex:1;
      border:none;
      border-radius:16px;
      padding:12px 14px;
      font-size:15px;
      font-weight:1000;
      cursor:pointer;
      transition: transform .15s ease, filter .15s ease;
    }
    .btn:active{ transform: scale(.98); }
    .btn:hover{ filter: brightness(1.02); transform: translateY(-2px); }

    .btn-yellow{
      background:var(--gold);
      color:#1f2a44;
      box-shadow:0 16px 28px rgba(255,183,3,.25);
    }
    .btn-dark{
      background:var(--dark);
      color:#fff;
      box-shadow:0 16px 28px rgba(15,23,42,.22);
    }

    /* mode print: biar clean */
    @media print{
      .confetti,.sparkle,.actions,.hero{ display:none !important; }
      .cert-wrap{ margin:0; padding:0; }
      .cert{ box-shadow:none; border-radius:0; }
      .cert::before,.cert::after{ display:none; }
      body{ background:#fff !important; }
    }
  </style>
</head>

<body class="home">

  <!-- confetti (dibuat via JS) -->
  <div class="confetti" id="confetti"></div>
  <div class="sparkle" id="sparkle"></div>

  <main class="wrap">
    <section class="hero">
      <img src="./img/12.jpg" class="mascot" alt="Maskot GESYA">
      <div class="hero-title">
        <h1>Sertifikat Pencapaian</h1>
        <p>Keren! Ini reward setelah menuntaskan semua level üéâ</p>
      </div>
    </section>

    <div class="cert-wrap">
      <div class="cert" id="certBox">
        <div class="cert-head">
          <div class="brand">
            <div class="t1">GESYA</div>
            <div class="t2">Game Edukasi Emosi Anak</div>
          </div>
          <div class="badge">üèÖ AHLI EMOSI</div>
        </div>

        <div class="titleRow">
          <h2 class="certTitle">Sertifikat Pencapaian</h2>
          <div class="lulusStamp">‚úÖ LULUS</div>
        </div>

        <!-- ‚úÖ URUTAN SESUAI KAMU -->
        <div class="info">
          <div class="k">Nama Anak :</div>
          <div class="v" id="cNama">-</div>

          <div class="k">Umur :</div>
          <div class="v" id="cUmur">-</div>

          <div class="k">Sekolah :</div>
          <div class="v" id="cSekolah">-</div>
        </div>

        <!-- skor per level -->
        <div class="scores">
          <h3>‚≠ê Rincian Skor per Level</h3>
          <div class="scoreList">
            <div class="scoreItem"><span class="n">Skor Level 1</span><b id="sL1">0</b></div>
            <div class="scoreItem"><span class="n">Skor Level 2</span><b id="sL2">0</b></div>
            <div class="scoreItem"><span class="n">Skor Level 3</span><b id="sL3">0</b></div>
            <div class="scoreItem"><span class="n">Skor Level 4</span><b id="sL4">0</b></div>
            <div class="scoreItem"><span class="n">Skor Level 5</span><b id="sL5">0</b></div>
            <div class="scoreItem"><span class="n">Skor Level 6</span><b id="sL6">0</b></div>
          </div>
        </div>

        <!-- ringkasan akhir -->
        <div class="stats">
          <div class="chip" id="cStars">üèÜ Total Skor: 0</div>
          <div class="chip" id="cDate">üìÖ Tanggal: -</div>
          <div class="chip">‚úÖ Hasil: LULUS</div>
        </div>

        <div class="actions">
          <button class="btn btn-yellow" onclick="window.print()">Cetak / Simpan</button>
          <button class="btn btn-dark" onclick="window.location.href='index.html'">Kembali</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    const KEY_UNLOCK = "gesya_unlocked";

    // keamanan: kalau belum unlock PIN, balik
    if (localStorage.getItem(KEY_UNLOCK) !== "1") {
      window.location.href = "index.html";
    }

    function isAllLevelDone(){
      for (let i = 1; i <= 6; i++){
        const done = localStorage.getItem(`ek_level${i}_selesai`);
        if (done !== "1") return false;
      }
      return true;
    }

    // kalau belum tamat 1-6, balik
    if (!isAllLevelDone()){
      window.location.href = "index.html";
    }

    // ===== data identitas =====
    const nama = (localStorage.getItem("ek_nama") || "").trim();
    const umur = (localStorage.getItem("ek_umur") || "").trim();
    const sekolah = (localStorage.getItem("ek_sekolah") || "").trim();

    // ===== skor level 1-6 =====
    const s1 = parseInt(localStorage.getItem("ek_level1_skor") || "0", 10);
    const s2 = parseInt(localStorage.getItem("ek_level2_skor") || "0", 10);
    const s3 = parseInt(localStorage.getItem("ek_level3_skor") || "0", 10);
    const s4 = parseInt(localStorage.getItem("ek_level4_skor") || "0", 10);
    const s5 = parseInt(localStorage.getItem("ek_level5_skor") || "0", 10);
    const s6 = parseInt(localStorage.getItem("ek_level6_skor") || "0", 10);
    const total = s1 + s2 + s3 + s4 + s5 + s6;

    // render identitas sesuai urutan
    document.getElementById("cNama").textContent = nama ? nama.toUpperCase() : "TEMAN";
    document.getElementById("cUmur").textContent = umur ? `${umur} tahun` : "-";
    document.getElementById("cSekolah").textContent = sekolah ? sekolah.toUpperCase() : "-";

    // render skor per level
    document.getElementById("sL1").textContent = s1;
    document.getElementById("sL2").textContent = s2;
    document.getElementById("sL3").textContent = s3;
    document.getElementById("sL4").textContent = s4;
    document.getElementById("sL5").textContent = s5;
    document.getElementById("sL6").textContent = s6;

    // render ringkasan
    document.getElementById("cStars").textContent = `üèÜ Total Skor: ${total}`;

    const now = new Date();
    const tgl = now.toLocaleDateString("id-ID", { day:"2-digit", month:"long", year:"numeric" });
    document.getElementById("cDate").textContent = `üìÖ Tanggal: ${tgl}`;

    // ===== Confetti generator (meriah tapi ringan) =====
    const confetti = document.getElementById("confetti");
    const colors = ["#ffb703","#3b82f6","#10b981","#ef4444","#a855f7","#f59e0b"];

    for (let i=0; i<46; i++){
      const p = document.createElement("i");
      const left = Math.random() * 100;
      const dur = 4 + Math.random() * 4.5;
      const delay = Math.random() * 2.2;
      const sizeW = 7 + Math.random() * 7;
      const sizeH = 10 + Math.random() * 10;

      p.style.left = left + "vw";
      p.style.animationDuration = dur + "s";
      p.style.animationDelay = delay + "s";
      p.style.width = sizeW + "px";
      p.style.height = sizeH + "px";
      p.style.background = colors[Math.floor(Math.random()*colors.length)];
      p.style.opacity = (0.65 + Math.random()*0.35).toFixed(2);
      p.style.transform = `rotate(${Math.random()*60-30}deg)`;

      confetti.appendChild(p);
    }

    // ===== Sparkle stars =====
    const sparkle = document.getElementById("sparkle");
    const stars = ["‚ú®","‚≠ê","üåü","üí´"];
    for (let i=0; i<18; i++){
      const s = document.createElement("span");
      s.textContent = stars[Math.floor(Math.random()*stars.length)];
      s.style.left = (Math.random()*100) + "vw";
      s.style.top  = (Math.random()*100) + "vh";
      s.style.animationDelay = (Math.random()*2.2) + "s";
      s.style.fontSize = (12 + Math.random()*14) + "px";
      sparkle.appendChild(s);
    }
  </script>

</body>
</html>
