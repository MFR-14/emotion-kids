<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GESYA - Cara Bermain</title>
  <link rel="stylesheet" href="./css/menu.css?v=3">
</head>

<body class="home">

  <main class="wrap">

    <!-- GAMBAR ATAS -->
    <section class="hero">
      <img src="./img/12.jpg" class="mascot" alt="Maskot GESYA">
      <div class="hero-title">
        <h1>Cara Bermain</h1>
        <p>Yuk main sambil belajar mengenali emosi ğŸ˜Š</p>
      </div>
    </section>

    <!-- PERATURAN -->
    <section class="card rules-card">
      <h2>Aturannya Gampang!</h2>
      <ul class="rules">
        <li>âœ… Cocokkan emosi sesuai level yang tersedia</li>
        <li>âœ… Klik atau geser jawaban sesuai pertanyaan</li>
        <li>âœ… Main sesuai waktu yang disediakan</li>
        <li>âœ… Setiap level ada nilai bintang â­</li>
        <li>âœ… Selesaikan semua level untuk dapat lencana <b>Ahli Emosi GESYA</b></li>
      </ul>
    </section>

    <!-- LEVEL -->
    <section class="card level-card">
      <h2>Pilih Level</h2>

      <div class="levels">
        <button class="lvl" onclick="goLevel(1)">
          <span class="no">1</span>
          <span class="txt">Level 1<br><small>Kenali Emosi</small></span>
          <span class="emo">ğŸ¯</span>
        </button>

        <button class="lvl" onclick="goLevel(2)">
          <span class="no">2</span>
          <span class="txt">Level 2<br><small>Pasangkan</small></span>
          <span class="emo">ğŸ§©</span>
        </button>

        <button class="lvl" onclick="goLevel(3)">
          <span class="no">3</span>
          <span class="txt">Level 3<br><small>Tempel Wajah</small></span>
          <span class="emo">ğŸ™‚</span>
        </button>

        <button class="lvl" onclick="goLevel(4)">
          <span class="no">4</span>
          <span class="txt">Level 4<br><small>Segera</small></span>
          <span class="emo">ğŸ˜</span>
        </button>

        <button class="lvl lock" onclick="goLevel(5)">
          <span class="no">5</span>
          <span class="txt">Level 5<br><small>Segera</small></span>
          <span class="emo">ğŸ™‹â€â™‚ï¸</span>
        </button>

        <button class="lvl lock" onclick="goLevel(6)">
          <span class="no">6</span>
          <span class="txt">Level 6<br><small>Segera</small></span>
          <span class="emo">ğŸ”’</span>
        </button>
      </div>

      <div class="bottom-note" id="progressNote">Tips: isi nama, umur, dan sekolah di Level 1 dulu ya âœ¨</div>

      <button class="reset" id="btnReset" type="button">Reset Data</button>
    </section>

  </main>

  <script>
    function goLevel(lvl){
      // kunci level 6 dulu biar anak gak bingung
      if (lvl >= 5) {
        alert("Level ini masih dikunci ya ğŸ˜„");
        return;
      }
      window.location.href = `level${lvl}.html`;
    }

    // ======= PROGRES / IDENTITAS =======
    const s1 = parseInt(localStorage.getItem("ek_level1_skor") || "0", 10);
    const s2 = parseInt(localStorage.getItem("ek_level2_skor") || "0", 10);
    const s3 = parseInt(localStorage.getItem("ek_level3_skor") || "0", 10);
    const total = s1 + s2 + s3;

    const nama = (localStorage.getItem("ek_nama") || "").trim();
    const umur = (localStorage.getItem("ek_umur") || "").trim();
    const sekolah = (localStorage.getItem("ek_sekolah") || "").trim();

    const note = document.getElementById("progressNote");

    // tampilkan note kalau sudah pernah isi data atau sudah ada skor
    if (nama || umur || sekolah || total) {
      const namaTampil = nama ? nama.toUpperCase() : "TEMAN";
      const umurTampil = umur ? `${umur} tahun` : "-";
      const sekolahTampil = sekolah || "-";
      note.textContent = `Halo ${namaTampil}! Umur ${umurTampil} â€¢ Sekolah ${sekolahTampil} â€¢ Skor sementara ${total} â­`;
    }

    // ======= RESET =======
    document.getElementById("btnReset").addEventListener("click", ()=>{
      if (!confirm("Reset nama, umur, sekolah, dan semua skor?")) return;

      // identitas
      localStorage.removeItem("ek_nama");
      localStorage.removeItem("ek_umur");
      localStorage.removeItem("ek_sekolah");

      // skor & status level (aman walau belum ada)
      const keys = [
        "ek_level1_skor","ek_level2_skor","ek_level3_skor","ek_level4_skor","ek_level5_skor","ek_level6_skor",
        "ek_level1_selesai","ek_level2_selesai","ek_level3_selesai","ek_level4_selesai","ek_level5_selesai","ek_level6_selesai",
        "ek_level1_alasan","ek_level2_alasan","ek_level3_alasan","ek_level4_alasan","ek_level5_alasan","ek_level6_alasan"
      ];
      keys.forEach(k => localStorage.removeItem(k));

      location.reload();
    });
  </script>

</body>
</html>
